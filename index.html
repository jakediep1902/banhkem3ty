<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BÃNH KEM 3 Tá»¶</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="main-header">
        <div class="logo">
            <!-- <img src="images/logo.jpg" alt="Innovex Global"> -->
        </div>
        <nav class="nav-menu">
            <ul>
                <li><a href="index.html">ğŸ  Trang chá»§</a></li>
                <li><a href="sanpham.html">ğŸ›’ Sáº£n pháº©m</a></li>
                <li><a href="lienhe.html">ğŸ“ LiÃªn há»‡</a></li>
            </ul>
        </nav>
        <a href="tel:+84989855092" class="call-button">ğŸ“ Gá»i ngay</a>
    </header>
    <div id="content"></div> <!-- Pháº§n tá»­ Ä‘á»ƒ hiá»ƒn thá»‹ ná»™i dung -->
   

    <div class="product-container">
        <!-- <div class="product" id="1" data-name="Fresh Ginger">
            <img src="https://images.unsplash.com/photo-1573414405995-2012861b74e0?q=80&w=600&auto=format&fit=crop" alt="Gá»«ng TÆ°Æ¡i">
            <h3>Gá»«ng TÆ°Æ¡i</h3>
            <p class="price">GiÃ¡: Äang táº£i...</p>
        </div> -->
    
    </div>
    
    <footer>
        
        <a href="#" onclick="checkAdminPassword()">ğŸ”‘ ADMIN</a>
    </footer>
    <footer>
        <p>&copy; 2024 BÃNH KEM 3 Tá»¶. All rights reserved.</p>
    </footer>

<script>

const titleID = GetTitleID();
const secretKey =  GetSCkey(); // ğŸ”´ THAY THáº¾ Báº°NG SECRET KEY Cá»¦A Báº N

function checkAdminPassword() {
    const passwordKey = "admin_password_verified";
    const expirationMinutes = 10; // â³ Khoáº£ng thá»i gian yÃªu cáº§u nháº­p láº¡i máº­t kháº©u (Ä‘Æ¡n vá»‹: phÃºt)

    const lastVerifiedTime = localStorage.getItem(passwordKey);
    const currentTime = new Date().getTime();

    // Náº¿u Ä‘Ã£ xÃ¡c thá»±c trÆ°á»›c Ä‘Ã³ vÃ  chÆ°a háº¿t háº¡n
    if (lastVerifiedTime && currentTime - lastVerifiedTime < expirationMinutes * 60 * 1000) {
        window.location.href = "admin.html";
        return;
    }

    // YÃªu cáº§u nháº­p máº­t kháº©u náº¿u chÆ°a cÃ³ hoáº·c Ä‘Ã£ háº¿t háº¡n
    let password = prompt("Nháº­p máº­t kháº©u ADMIN:");
    if (password === "123456") {  // ğŸ”‘ Thay "123456" báº±ng máº­t kháº©u thá»±c táº¿
        localStorage.setItem(passwordKey, currentTime); // LÆ°u thá»i gian xÃ¡c thá»±c
        window.location.href = "admin.html";
    } else if (password !== null) {
        alert("Sai máº­t kháº©u! Vui lÃ²ng thá»­ láº¡i.");
    }
}

   // Danh sÃ¡ch sáº£n pháº©m Ä‘Ã£ hiá»ƒn thá»‹
const currentProducts = new Set();

// Danh sÃ¡ch hÃ¬nh áº£nh sáº£n pháº©m
const productImages = {
    banana: "https://giongchuoicaymo.com/wp-content/uploads/2021/05/chuoi-laba-da-lat-428-1.jpg",
    cacao: "https://villagecacao.com/uploads/shops/2021_04/cacao.jpg",
    ginger: "https://images.unsplash.com/photo-1573414405995-2012861b74e0?q=80&w=600&auto=format&fit=crop",
    garlic: "https://product.hstatic.net/1000178034/product/toi_cu_to_-_1kg_370a8b9654914afca274dd65eff74c08_4761b715a06d4d0b829d2e54689d170d_master.jpg",
    pepper: "https://static.kinhtedothi.vn/images/upload/2021/12/19/ea4a7274-efa1-47e9-b6dd-c23799707242.jpg",
    chili: "https://suckhoedoisong.qltns.mediacdn.vn/2015/1-ot-cay-1424484052730.jpg",
    thancui: "https://lh3.googleusercontent.com/pw/AP1GczOHKYKYFGrWEOlXMYE54hjwj6vG9NTLAn3vJ3iOFI2MhAezzBLiFowG6aa4rlqyIppxg0m8ex573BVdWA_2DIcF2Vro5OjgIPAz5VF5ltZT_0khmRi9IOM4iukJNKjnFFbgr32WcZYEFy8D08PRqwhX=w1260-h945-s-no-gm?authuser=0",
    vanep:"https://scontent.fsgn2-7.fna.fbcdn.net/v/t39.30808-6/457224960_495698036796149_7733101225166612730_n.jpg?_nc_cat=100&ccb=1-7&_nc_sid=833d8c&_nc_ohc=6AcosORhPEMQ7kNvgFTHXhC&_nc_oc=AdirrUilvJ_l_DGd3glUAAh-COkJ4kxk-FikXWgqUrN48nlqnL020VEAxcLmTtzsh7GQuqV5QFqbaXucD8fSbMiD&_nc_zt=23&_nc_ht=scontent.fsgn2-7.fna&_nc_gid=cmk3CCTz9gsaiM0u72NvEw&oh=00_AYGgYaD9j3eyTsS44TKFlEeVFUCCGrzGJRc0rL9etOnq2w&oe=67DD75F6"
};

// HÃ m gá»i PlayFab API Ä‘á»ƒ láº¥y dá»¯ liá»‡u sáº£n pháº©m
async function getPrice() {
    const url = `https://${titleID}.playfabapi.com/Admin/GetTitleData`;
    

    try {
        const response = await fetch(url, {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "X-SecretKey": secretKey
            },
            body: JSON.stringify({})
        });

        const result = await response.json();
        console.log("ğŸ“¡ Dá»¯ liá»‡u tá»« PlayFab:", result);

        if (response.ok) {
            updateProductList(result.data.Data);
        } else {
            console.error("âŒ Lá»—i táº£i dá»¯ liá»‡u:", result.errorMessage);
        }
    } catch (error) {
        console.error("âŒ Lá»—i káº¿t ná»‘i:", error);
    }
}


// HÃ m cáº­p nháº­t sáº£n pháº©m trÃªn giao diá»‡n
function updateProductList(data) {
    const productList = document.querySelector(".product-container"); // Chá»n container chá»©a táº¥t cáº£ sáº£n pháº©m

    if (!productList) {
        console.error("âŒ Lá»–I: KhÃ´ng tÃ¬m tháº¥y pháº§n tá»­ .product-container!");
        return;
    }

    for (const key in data) {
        if (data.hasOwnProperty(key)) {
            try {
                const productData = JSON.parse(data[key]); // Chuyá»ƒn Ä‘á»•i tá»« chuá»—i JSON sang object
                
                //const price = productData.price || "Äang cáº­p nháº­t";
                const price = (productData.price !== undefined && Number(productData.price) > 0) 
    ? productData.price 
    : "Äang cáº­p nháº­t";

                console.log("####################",price)
                //if (Number(price) < 0) continue;

                const imageUrl = productData.image || "https://via.placeholder.com/150"; // URL áº£nh tá»« dá»¯ liá»‡u
                const productName = key.charAt(0).toUpperCase() + key.slice(1); // Viáº¿t hoa chá»¯ cÃ¡i Ä‘áº§u

                let existingProduct = document.querySelector(`.product[data-name="${key}"]`);

                if (existingProduct) {
                    console.log("ğŸ”„ Cáº­p nháº­t sáº£n pháº©m:", key);
                    // Cáº­p nháº­t giÃ¡
                    existingProduct.querySelector(".price").innerText = `GiÃ¡: ${price} VNÄ/kg`;
                    // Cáº­p nháº­t hÃ¬nh áº£nh
                    existingProduct.querySelector("img").src = imageUrl;
                } else {
                     
                    console.log("â• Táº¡o sáº£n pháº©m má»›i:", key);
                    // Táº¡o sáº£n pháº©m má»›i náº¿u chÆ°a cÃ³
                    const productDiv = document.createElement("div");
                    productDiv.classList.add("product");
                    productDiv.dataset.name = key;
                    productDiv.innerHTML = `
                        <img src="${imageUrl}" alt="${productName}">
                        <h3>${productName}</h3>
                        <p class="price">GiÃ¡: ${price} VNÄ/kg</p>
                    `;
                    productList.appendChild(productDiv);
                }
            } catch (error) {
                console.error(`âŒ Lá»—i khi xá»­ lÃ½ sáº£n pháº©m "${key}":`, error);
            }
        }
    }
}


// Gá»i hÃ m khi trang táº£i
document.addEventListener("DOMContentLoaded", () => {
    getPrice();
    setInterval(getPrice, 50000); // Cáº­p nháº­t giÃ¡ má»—i 50 giÃ¢y
});





</script>
<div class="container">
    <a href="tel:+84989855092" class="button">ğŸ“ LiÃªn há»‡: CHÃ CÃ”NG</a>
    <a href="https://zalo.me/0989855092" class="button">ğŸ’¬ Nháº¯n Zalo</a>
    <!-- <a href="En.html" class="button">ğŸŒ English</a> -->
</div>
</body>
</html>
